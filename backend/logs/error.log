{"level":"error","message":"Register failed: Username already exists.","timestamp":"2025-11-01 16:29:13"}
{"level":"error","message":"Register failed: Username already exists.","timestamp":"2025-11-01 16:31:09"}
{"level":"error","message":"Register failed: Username already exists.","timestamp":"2025-11-01 16:32:51"}
{"level":"error","message":"updateUserProfile error: Error: Nickname already exists.\n    at Object.updateUserProfile (D:\\BaiTapLonWeb20251\\backend\\src\\services\\user.service.js:35:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async updateProfile (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\user.controller.js:28:25) {\n  [stack]: [Getter/Setter],\n  [message]: 'Nickname already exists.'\n}","timestamp":"2025-11-01 16:41:26"}
{"level":"error","message":"sendFriendRequest error: Error: Friend validation failed: requester: Path `requester` is required.\n    at ValidationError.inspect (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongoose\\lib\\error\\validation.js:52:26)\n    at formatValue (node:internal/util/inspect:850:19)\n    at inspect (node:internal/util/inspect:387:10)\n    at formatWithOptionsInternal (node:internal/util/inspect:2303:25)\n    at Object.format (node:internal/util/inspect:2223:10)\n    at Splatter._splat (D:\\BaiTapLonWeb20251\\backend\\node_modules\\logform\\splat.js:71:25)\n    at Splatter.transform (D:\\BaiTapLonWeb20251\\backend\\node_modules\\logform\\splat.js:119:19)\n    at Format.transform (D:\\BaiTapLonWeb20251\\backend\\node_modules\\logform\\combine.js:20:24)\n    at DerivedLogger._transform (D:\\BaiTapLonWeb20251\\backend\\node_modules\\winston\\lib\\winston\\logger.js:336:29)\n    at Transform._read (D:\\BaiTapLonWeb20251\\backend\\node_modules\\readable-stream\\lib\\_stream_transform.js:166:10) {\n  [stack]: [Getter/Setter],\n  [message]: 'Friend validation failed: requester: Path `requester` is required.',\n  errors: {\n    requester: ValidatorError: Path `requester` is required.\n        at validate (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongoose\\lib\\schemaType.js:1417:13)\n        at SchemaType.doValidate (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongoose\\lib\\schemaType.js:1401:7)\n        at D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongoose\\lib\\document.js:3115:18\n        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {\n      [stack]: [Getter/Setter],\n      [message]: 'Path `requester` is required.',\n      properties: {\n        validator: [Function (anonymous)] {\n          [length]: 1,\n          [name]: '',\n          [prototype]: [Object]\n        },\n        message: 'Path `requester` is required.',\n        type: 'required',\n        path: 'requester',\n        fullPath: undefined,\n        value: undefined\n      },\n      kind: 'required',\n      path: 'requester',\n      value: undefined,\n      reason: undefined,\n      [Symbol(mongoose#validatorError)]: true,\n      [name]: 'ValidatorError'\n    }\n  },\n  _message: 'Friend validation failed'\n}","timestamp":"2025-11-01 17:47:50"}
{"level":"error","message":"updateUserProfile error: Error: Nickname already exists.\n    at Object.updateUserProfile (D:\\BaiTapLonWeb20251\\backend\\src\\services\\user.service.js:35:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async updateProfile (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\user.controller.js:29:25) {\n  [stack]: [Getter/Setter],\n  [message]: 'Nickname already exists.'\n}","timestamp":"2025-11-01 17:52:14"}
{"level":"error","message":"updateProfile error: Error: Nickname already exists.","timestamp":"2025-11-01 17:52:14"}
{"level":"error","message":"getUserProfile error: Error: User not found\n    at Object.getUserProfile (D:\\BaiTapLonWeb20251\\backend\\src\\services\\user.service.js:14:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getProfile (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\user.controller.js:15:18) {\n  [stack]: [Getter/Setter],\n  [message]: 'User not found'\n}","timestamp":"2025-11-01 17:52:17"}
{"level":"error","message":"getProfile error: Error: User not found","timestamp":"2025-11-01 17:52:17"}
{"level":"error","message":"getUserProfile error: Error: User not found\n    at Object.getUserProfile (D:\\BaiTapLonWeb20251\\backend\\src\\services\\user.service.js:14:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getProfile (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\user.controller.js:15:18) {\n  [stack]: [Getter/Setter],\n  [message]: 'User not found'\n}","timestamp":"2025-11-01 17:52:21"}
{"level":"error","message":"getProfile error: Error: User not found","timestamp":"2025-11-01 17:52:21"}
{"level":"error","message":"getUserProfile error: Error: User not found\n    at Object.getUserProfile (D:\\BaiTapLonWeb20251\\backend\\src\\services\\user.service.js:14:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getProfile (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\user.controller.js:15:18) {\n  [stack]: [Getter/Setter],\n  [message]: 'User not found'\n}","timestamp":"2025-11-01 17:52:37"}
{"level":"error","message":"getProfile error: Error: User not found","timestamp":"2025-11-01 17:52:37"}
{"level":"error","message":"getUserProfile error: Error: User not found\n    at Object.getUserProfile (D:\\BaiTapLonWeb20251\\backend\\src\\services\\user.service.js:14:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getProfile (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\user.controller.js:15:18) {\n  [stack]: [Getter/Setter],\n  [message]: 'User not found'\n}","timestamp":"2025-11-01 17:52:52"}
{"level":"error","message":"getProfile error: Error: User not found","timestamp":"2025-11-01 17:52:52"}
{"level":"error","message":"getUserProfile error: Error: User not found\n    at Object.getUserProfile (D:\\BaiTapLonWeb20251\\backend\\src\\services\\user.service.js:14:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getProfile (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\user.controller.js:15:18) {\n  [stack]: [Getter/Setter],\n  [message]: 'User not found'\n}","timestamp":"2025-11-01 17:53:44"}
{"level":"error","message":"getProfile error: Error: User not found","timestamp":"2025-11-01 17:53:44"}
{"level":"error","message":"sendFriendRequest error: Error: Đã tồn tại mối quan hệ hoặc lời mời\n    at Object.sendFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:33:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async sendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:46:21) {\n  [stack]: [Getter/Setter],\n  [message]: 'Đã tồn tại mối quan hệ hoặc lời mời'\n}","timestamp":"2025-11-01 17:55:34"}
{"level":"error","message":"sendFriendRequest error: Error: Đã tồn tại mối quan hệ hoặc lời mời\n    at Object.sendFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:27:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async sendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:46:21) {\n  [stack]: [Getter/Setter],\n  [message]: 'Đã tồn tại mối quan hệ hoặc lời mời'\n}","timestamp":"2025-11-01 17:57:31"}
{"level":"error","message":"acceptFriendRequest error: Error: Không tìm thấy lời mời\n    at Object.acceptFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:54:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async acceptRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:77:20) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời'\n}","timestamp":"2025-11-01 18:01:32"}
{"level":"error","message":"acceptFriendRequest error: Error: Không tìm thấy lời mời\n    at Object.acceptFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:54:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async acceptRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:77:20) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời'\n}","timestamp":"2025-11-01 18:01:40"}
{"level":"error","message":"acceptFriendRequest error: Error: Không tìm thấy lời mời\n    at Object.acceptFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:54:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async acceptRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:77:20) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời'\n}","timestamp":"2025-11-01 18:01:45"}
{"level":"error","message":"acceptFriendRequest error: Error: Không tìm thấy lời mời\n    at Object.acceptFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:54:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async acceptRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:77:20) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời'\n}","timestamp":"2025-11-01 18:02:04"}
{"level":"error","message":"sendFriendRequest error: ReferenceError: io is not defined\n    at Object.sendFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:36:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async sendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:46:21) {\n  [stack]: [Getter/Setter],\n  [message]: 'io is not defined'\n}","timestamp":"2025-11-01 18:02:42"}
{"level":"error","message":"sendFriendRequest error: Error: Đã tồn tại mối quan hệ hoặc lời mời\n    at Object.sendFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:27:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async sendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:46:21) {\n  [stack]: [Getter/Setter],\n  [message]: 'Đã tồn tại mối quan hệ hoặc lời mời'\n}","timestamp":"2025-11-01 18:03:01"}
{"level":"error","message":"acceptFriendRequest error: Error: Không tìm thấy lời mời\n    at Object.acceptFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:54:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async acceptRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:77:20) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời'\n}","timestamp":"2025-11-01 18:03:21"}
{"level":"error","message":"acceptFriendRequest error: Error: Không tìm thấy lời mời\n    at Object.acceptFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:54:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async acceptRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:77:20) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời'\n}","timestamp":"2025-11-01 18:03:24"}
{"level":"error","message":"acceptFriendRequest error: ReferenceError: io is not defined\n    at Object.acceptFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:58:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async acceptRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:77:20) {\n  [stack]: [Getter/Setter],\n  [message]: 'io is not defined'\n}","timestamp":"2025-11-01 18:05:55"}
{"level":"error","message":"acceptFriendRequest error: Error: Không tìm thấy lời mời kết bạn\n    at Object.acceptFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:59:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async acceptRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:77:20) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời kết bạn'\n}","timestamp":"2025-11-01 18:07:55"}
{"level":"error","message":"acceptFriendRequest error: Error: Không tìm thấy lời mời kết bạn\n    at Object.acceptFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:59:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async acceptRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:77:20) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời kết bạn'\n}","timestamp":"2025-11-01 18:08:35"}
{"level":"error","message":"acceptFriendRequest error: Error: Không tìm thấy lời mời kết bạn\n    at Object.acceptFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:59:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async acceptRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:77:20) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời kết bạn'\n}","timestamp":"2025-11-01 18:08:57"}
{"level":"error","message":"acceptFriendRequest error: ReferenceError: requesterId is not defined\n    at Object.acceptFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:52:24)\n    at acceptRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:77:40)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at module.exports (D:\\BaiTapLonWeb20251\\backend\\src\\middlewares\\auth.middleware.js:42:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'requesterId is not defined'\n}","timestamp":"2025-11-01 18:10:26"}
{"level":"error","message":"acceptFriendRequest error: Error: Không tìm thấy lời mời kết bạn\n    at Object.acceptFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:61:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async acceptRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:77:20) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời kết bạn'\n}","timestamp":"2025-11-01 18:11:21"}
{"level":"error","message":"acceptFriendRequest error: Error: Không tìm thấy lời mời kết bạn\n    at Object.acceptFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:61:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async acceptRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:77:20) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời kết bạn'\n}","timestamp":"2025-11-01 18:13:25"}
{"level":"error","message":"acceptFriendRequest error: Error: Không tìm thấy lời mời kết bạn\n    at Object.acceptFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:66:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async acceptRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:77:20) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời kết bạn'\n}","timestamp":"2025-11-01 18:15:09"}
{"level":"error","message":"sendFriendRequest error: ReferenceError: io is not defined\n    at Object.sendFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:38:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async sendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:46:21) {\n  [stack]: [Getter/Setter],\n  [message]: 'io is not defined'\n}","timestamp":"2025-11-01 18:15:38"}
{"level":"error","message":"sendFriendRequest error: ReferenceError: io is not defined\n    at Object.sendFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:36:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async sendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:46:21) {\n  [stack]: [Getter/Setter],\n  [message]: 'io is not defined'\n}","timestamp":"2025-11-01 18:16:14"}
{"level":"error","message":"sendFriendRequest error: Error: Đã tồn tại mối quan hệ hoặc lời mời\n    at Object.sendFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:27:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async sendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:46:21) {\n  [stack]: [Getter/Setter],\n  [message]: 'Đã tồn tại mối quan hệ hoặc lời mời'\n}","timestamp":"2025-11-01 18:16:46"}
{"level":"error","message":"sendFriendRequest error: ReferenceError: io is not defined\n    at Object.sendFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:36:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async sendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:46:21) {\n  [stack]: [Getter/Setter],\n  [message]: 'io is not defined'\n}","timestamp":"2025-11-01 18:17:06"}
{"level":"error","message":"sendFriendRequest error: Error: Đã tồn tại mối quan hệ hoặc lời mời\n    at Object.sendFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:34:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async sendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:46:21) {\n  [stack]: [Getter/Setter],\n  [message]: 'Đã tồn tại mối quan hệ hoặc lời mời'\n}","timestamp":"2025-11-01 18:19:27"}
{"level":"error","message":"cancelFriendRequest error: Error: Không tìm thấy lời mời để hủy\n    at Object.cancelFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:101:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async cancelRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:93:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời để hủy'\n}","timestamp":"2025-11-01 18:23:13"}
{"level":"error","message":"cancelFriendRequest error: Error: Không tìm thấy lời mời để hủy\n    at Object.cancelFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:101:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async cancelRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:93:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời để hủy'\n}","timestamp":"2025-11-01 18:23:41"}
{"level":"error","message":"cancelFriendRequest error: Error: Không tìm thấy lời mời để hủy\n    at Object.cancelFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:103:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async cancelRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:93:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời để hủy'\n}","timestamp":"2025-11-01 18:24:09"}
{"level":"error","message":"cancelFriendRequest error: Error: Không tìm thấy lời mời để hủy\n    at Object.cancelFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:103:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async cancelRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:93:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời để hủy'\n}","timestamp":"2025-11-01 18:24:37"}
{"level":"error","message":"cancelFriendRequest error: Error: Không tìm thấy lời mời để hủy\n    at Object.cancelFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:100:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async cancelRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:93:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời để hủy'\n}","timestamp":"2025-11-01 18:26:54"}
{"level":"error","message":"cancelFriendRequest error: Error: Không tìm thấy lời mời để hủy\n    at Object.cancelFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:100:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async cancelRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:93:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời để hủy'\n}","timestamp":"2025-11-01 18:27:07"}
{"level":"error","message":"cancelFriendRequest error: Error: Không tìm thấy lời mời để hủy\n    at Object.cancelFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:100:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async cancelRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:93:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời để hủy'\n}","timestamp":"2025-11-01 18:27:35"}
{"level":"error","message":"cancelFriendRequest error: Error: Không tìm thấy lời mời để hủy\n    at Object.cancelFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:100:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async cancelRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:93:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời để hủy'\n}","timestamp":"2025-11-01 18:27:47"}
{"level":"error","message":"cancelFriendRequest error: Error: Không tìm thấy lời mời để hủy\n    at Object.cancelFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:100:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async cancelRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:93:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời để hủy'\n}","timestamp":"2025-11-01 18:27:54"}
{"level":"error","message":"cancelFriendRequest error: Error: Không tìm thấy lời mời để hủy\n    at Object.cancelFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:100:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async cancelRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:93:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời để hủy'\n}","timestamp":"2025-11-01 18:29:17"}
{"level":"error","message":"cancelFriendRequest error: ReferenceError: request is not defined\n    at Object.cancelFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:101:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async cancelRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:93:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'request is not defined'\n}","timestamp":"2025-11-01 18:33:00"}
{"level":"error","message":"sendFriendRequest error: Error: Đã tồn tại mối quan hệ hoặc lời mời\n    at Object.sendFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:33:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async sendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:46:21) {\n  [stack]: [Getter/Setter],\n  [message]: 'Đã tồn tại mối quan hệ hoặc lời mời'\n}","timestamp":"2025-11-01 18:37:54"}
{"level":"error","message":"sendFriendRequest error: MongoServerError: E11000 duplicate key error collection: caro-online.friends index: requester_1_addressee_1 dup key: { requester: ObjectId('68fcb610850ee047361ea30a'), addressee: ObjectId('6905e844facfb3e860b75b6b') }\n    at InsertOneOperation.handleOk (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\operations\\insert.js:51:19)\n    at tryOperation (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:214:34)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async executeOperation (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:78:16)\n    at async Collection.insertOne (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\collection.js:154:16) {\n  [stack]: [Getter/Setter],\n  [message]: \"E11000 duplicate key error collection: caro-online.friends index: requester_1_addressee_1 dup key: { requester: ObjectId('68fcb610850ee047361ea30a'), addressee: ObjectId('6905e844facfb3e860b75b6b') }\",\n  errorLabelSet: Set(0) {},\n  errorResponse: {\n    index: 0,\n    code: 11000,\n    errmsg: \"E11000 duplicate key error collection: caro-online.friends index: requester_1_addressee_1 dup key: { requester: ObjectId('68fcb610850ee047361ea30a'), addressee: ObjectId('6905e844facfb3e860b75b6b') }\",\n    keyPattern: { requester: 1, addressee: 1 },\n    keyValue: {\n      requester: new ObjectId('68fcb610850ee047361ea30a'),\n      addressee: new ObjectId('6905e844facfb3e860b75b6b')\n    }\n  },\n  index: 0,\n  code: 11000,\n  keyPattern: { requester: 1, addressee: 1 },\n  keyValue: {\n    requester: new ObjectId('68fcb610850ee047361ea30a'),\n    addressee: new ObjectId('6905e844facfb3e860b75b6b')\n  },\n  [name]: [Getter],\n  [errorLabels]: [Getter],\n  [errmsg]: [Getter]\n}","timestamp":"2025-11-01 18:38:20"}
{"level":"error","message":"cancelFriendRequest error: Error: Không tìm thấy lời mời để hủy\n    at Object.cancelFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:81:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async cancelRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:93:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời để hủy'\n}","timestamp":"2025-11-01 18:40:26"}
{"level":"error","message":"sendFriendRequest error: Error: Đã tồn tại mối quan hệ hoặc lời mời\n    at Object.sendFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:27:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async sendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:46:21) {\n  [stack]: [Getter/Setter],\n  [message]: 'Đã tồn tại mối quan hệ hoặc lời mời'\n}","timestamp":"2025-11-01 18:40:53"}
{"level":"error","message":"sendFriendRequest error: MongoServerError: E11000 duplicate key error collection: caro-online.friends index: requester_1_addressee_1 dup key: { requester: ObjectId('68fcb631850ee047361ea312'), addressee: ObjectId('6905e844facfb3e860b75b6b') }\n    at InsertOneOperation.handleOk (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\operations\\insert.js:51:19)\n    at tryOperation (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:214:34)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async executeOperation (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:78:16)\n    at async Collection.insertOne (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\collection.js:154:16) {\n  [stack]: [Getter/Setter],\n  [message]: \"E11000 duplicate key error collection: caro-online.friends index: requester_1_addressee_1 dup key: { requester: ObjectId('68fcb631850ee047361ea312'), addressee: ObjectId('6905e844facfb3e860b75b6b') }\",\n  errorLabelSet: Set(0) {},\n  errorResponse: {\n    index: 0,\n    code: 11000,\n    errmsg: \"E11000 duplicate key error collection: caro-online.friends index: requester_1_addressee_1 dup key: { requester: ObjectId('68fcb631850ee047361ea312'), addressee: ObjectId('6905e844facfb3e860b75b6b') }\",\n    keyPattern: { requester: 1, addressee: 1 },\n    keyValue: {\n      requester: new ObjectId('68fcb631850ee047361ea312'),\n      addressee: new ObjectId('6905e844facfb3e860b75b6b')\n    }\n  },\n  index: 0,\n  code: 11000,\n  keyPattern: { requester: 1, addressee: 1 },\n  keyValue: {\n    requester: new ObjectId('68fcb631850ee047361ea312'),\n    addressee: new ObjectId('6905e844facfb3e860b75b6b')\n  },\n  [name]: [Getter],\n  [errorLabels]: [Getter],\n  [errmsg]: [Getter]\n}","timestamp":"2025-11-01 18:41:09"}
{"level":"error","message":"acceptFriendRequest error: Error: Không tìm thấy lời mời kết bạn\n    at Object.acceptFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:81:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async acceptRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:77:20) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời kết bạn'\n}","timestamp":"2025-11-01 18:42:37"}
{"level":"error","message":"sendFriendRequest error: Error: Hai người đã là bạn bè\n    at Object.sendFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:38:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async sendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:46:21) {\n  [stack]: [Getter/Setter],\n  [message]: 'Hai người đã là bạn bè'\n}","timestamp":"2025-11-01 18:46:04"}
{"level":"error","message":"acceptFriendRequest error: Error: Không tìm thấy lời mời kết bạn\n    at Object.acceptFriendRequest (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:81:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async acceptRequest (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:77:20) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không tìm thấy lời mời kết bạn'\n}","timestamp":"2025-11-01 18:46:11"}
{"level":"error","message":"searchUsers error: ReferenceError: username is not defined\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:211:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:107:19) {\n  [stack]: [Getter/Setter],\n  [message]: 'username is not defined'\n}","timestamp":"2025-11-01 18:48:55"}
{"level":"error","message":"searchUsers error: ReferenceError: username is not defined\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:211:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:108:19) {\n  [stack]: [Getter/Setter],\n  [message]: 'username is not defined'\n}","timestamp":"2025-11-01 18:49:57"}
{"level":"error","message":"searchUsers error: MongoServerError: $regex has to be a string\n    at Connection.sendCommand (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\cmap\\connection.js:306:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Connection.command (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\cmap\\connection.js:334:26)\n    at async Server.command (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\sdam\\server.js:194:29)\n    at async tryOperation (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:213:32)\n    at async executeOperation (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:78:16)\n    at async FindCursor._initialize (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\cursor\\find_cursor.js:62:26)\n    at async FindCursor.cursorInit (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:632:27)\n    at async FindCursor.fetchBatch (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:666:13)\n    at async FindCursor.next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:342:17) {\n  [stack]: [Getter/Setter],\n  [message]: '$regex has to be a string',\n  errorLabelSet: Set(0) {},\n  errorResponse: {\n    ok: 0,\n    errmsg: '$regex has to be a string',\n    code: 2,\n    codeName: 'BadValue'\n  },\n  ok: 0,\n  code: 2,\n  codeName: 'BadValue',\n  [name]: [Getter],\n  [errorLabels]: [Getter],\n  [errmsg]: [Getter]\n}","timestamp":"2025-11-01 18:50:04"}
{"level":"error","message":"searchUsers error: MongoServerError: $regex has to be a string\n    at Connection.sendCommand (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\cmap\\connection.js:306:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Connection.command (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\cmap\\connection.js:334:26)\n    at async Server.command (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\sdam\\server.js:194:29)\n    at async tryOperation (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:213:32)\n    at async executeOperation (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:78:16)\n    at async FindCursor._initialize (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\cursor\\find_cursor.js:62:26)\n    at async FindCursor.cursorInit (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:632:27)\n    at async FindCursor.fetchBatch (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:666:13)\n    at async FindCursor.next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:342:17) {\n  [stack]: [Getter/Setter],\n  [message]: '$regex has to be a string',\n  errorLabelSet: Set(0) {},\n  errorResponse: {\n    ok: 0,\n    errmsg: '$regex has to be a string',\n    code: 2,\n    codeName: 'BadValue'\n  },\n  ok: 0,\n  code: 2,\n  codeName: 'BadValue',\n  [name]: [Getter],\n  [errorLabels]: [Getter],\n  [errmsg]: [Getter]\n}","timestamp":"2025-11-01 18:50:19"}
{"level":"error","message":"searchUsers error: ReferenceError: username is not defined\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:211:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:111:19) {\n  [stack]: [Getter/Setter],\n  [message]: 'username is not defined'\n}","timestamp":"2025-11-01 18:52:05"}
{"level":"error","message":"searchUsers error: ReferenceError: username is not defined\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:214:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:111:19) {\n  [stack]: [Getter/Setter],\n  [message]: 'username is not defined'\n}","timestamp":"2025-11-01 18:55:58"}
{"level":"error","message":"searchUsers error: ReferenceError: username is not defined\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:217:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:111:19) {\n  [stack]: [Getter/Setter],\n  [message]: 'username is not defined'\n}","timestamp":"2025-11-01 18:56:20"}
{"level":"error","message":"searchUsers error: ReferenceError: username is not defined\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:217:47)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:112:19) {\n  [stack]: [Getter/Setter],\n  [message]: 'username is not defined'\n}","timestamp":"2025-11-01 18:57:18"}
{"level":"error","message":"searchUsers error: ReferenceError: username is not defined\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:217:46)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:112:19) {\n  [stack]: [Getter/Setter],\n  [message]: 'username is not defined'\n}","timestamp":"2025-11-01 18:58:13"}
{"level":"error","message":"searchUsers error: ReferenceError: username is not defined\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:217:46)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:113:19) {\n  [stack]: [Getter/Setter],\n  [message]: 'username is not defined'\n}","timestamp":"2025-11-01 18:59:42"}
{"level":"error","message":"removeFriend error: Error: Không có mối quan hệ để xóa\n    at Object.removeFriend (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:136:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async removeFriend (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:129:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không có mối quan hệ để xóa'\n}","timestamp":"2025-11-01 19:06:26"}
{"level":"error","message":"removeFriend error: Error: Không có mối quan hệ để xóa\n    at Object.removeFriend (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:136:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async removeFriend (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:129:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không có mối quan hệ để xóa'\n}","timestamp":"2025-11-01 19:06:28"}
{"level":"error","message":"removeFriend error: Error: Không có mối quan hệ để xóa\n    at Object.removeFriend (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:136:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async removeFriend (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:129:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không có mối quan hệ để xóa'\n}","timestamp":"2025-11-01 19:08:29"}
{"level":"error","message":"removeFriend error: Error: Không có mối quan hệ để xóa\n    at Object.removeFriend (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:136:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async removeFriend (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:129:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không có mối quan hệ để xóa'\n}","timestamp":"2025-11-01 19:08:42"}
{"level":"error","message":"removeFriend error: Error: Friend validation failed: status: `removed` is not a valid enum value for path `status`.\n    at ValidationError.inspect (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongoose\\lib\\error\\validation.js:52:26)\n    at formatValue (node:internal/util/inspect:850:19)\n    at inspect (node:internal/util/inspect:387:10)\n    at formatWithOptionsInternal (node:internal/util/inspect:2303:25)\n    at Object.format (node:internal/util/inspect:2223:10)\n    at Splatter._splat (D:\\BaiTapLonWeb20251\\backend\\node_modules\\logform\\splat.js:71:25)\n    at Splatter.transform (D:\\BaiTapLonWeb20251\\backend\\node_modules\\logform\\splat.js:119:19)\n    at Format.transform (D:\\BaiTapLonWeb20251\\backend\\node_modules\\logform\\combine.js:20:24)\n    at DerivedLogger._transform (D:\\BaiTapLonWeb20251\\backend\\node_modules\\winston\\lib\\winston\\logger.js:336:29)\n    at Transform._read (D:\\BaiTapLonWeb20251\\backend\\node_modules\\readable-stream\\lib\\_stream_transform.js:166:10) {\n  [stack]: [Getter/Setter],\n  [message]: 'Friend validation failed: status: `removed` is not a valid enum value for path `status`.',\n  errors: {\n    status: ValidatorError: `removed` is not a valid enum value for path `status`.\n        at validate (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongoose\\lib\\schemaType.js:1417:13)\n        at SchemaType.doValidate (D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongoose\\lib\\schemaType.js:1401:7)\n        at D:\\BaiTapLonWeb20251\\backend\\node_modules\\mongoose\\lib\\document.js:3115:18\n        at process.processTicksAndRejections (node:internal/process/task_queues:85:11) {\n      [stack]: [Getter/Setter],\n      [message]: '`removed` is not a valid enum value for path `status`.',\n      properties: {\n        validator: [Function (anonymous)] {\n          [length]: 1,\n          [name]: '',\n          [prototype]: [Object]\n        },\n        message: '`removed` is not a valid enum value for path `status`.',\n        type: 'enum',\n        enumValues: [ 'pending', 'accepted', 'canceled', [length]: 3 ],\n        path: 'status',\n        fullPath: undefined,\n        value: 'removed',\n        length: 7\n      },\n      kind: 'enum',\n      path: 'status',\n      value: 'removed',\n      reason: undefined,\n      [Symbol(mongoose#validatorError)]: true,\n      [name]: 'ValidatorError'\n    }\n  },\n  _message: 'Friend validation failed'\n}","timestamp":"2025-11-01 19:08:48"}
{"level":"error","message":"removeFriend error: Error: Không có mối quan hệ để xóa\n    at Object.removeFriend (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:136:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async removeFriend (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:129:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'Không có mối quan hệ để xóa'\n}","timestamp":"2025-11-01 19:10:44"}
{"level":"error","message":"searchUsers error: Error: userID không hợp lệ\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:230:15)\n    at searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:114:39)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at module.exports (D:\\BaiTapLonWeb20251\\backend\\src\\middlewares\\auth.middleware.js:42:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'userID không hợp lệ'\n}","timestamp":"2025-11-01 19:26:30"}
{"level":"error","message":"searchUsers error: Error: userID không hợp lệ\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:230:15)\n    at searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:114:39)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at module.exports (D:\\BaiTapLonWeb20251\\backend\\src\\middlewares\\auth.middleware.js:42:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'userID không hợp lệ'\n}","timestamp":"2025-11-01 19:26:32"}
{"level":"error","message":"searchUsers error: Error: userID không hợp lệ\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:230:15)\n    at searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:114:39)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at module.exports (D:\\BaiTapLonWeb20251\\backend\\src\\middlewares\\auth.middleware.js:42:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'userID không hợp lệ'\n}","timestamp":"2025-11-01 19:26:36"}
{"level":"error","message":"searchUsers error: Error: userID không hợp lệ\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:230:15)\n    at searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:114:39)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at module.exports (D:\\BaiTapLonWeb20251\\backend\\src\\middlewares\\auth.middleware.js:42:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'userID không hợp lệ'\n}","timestamp":"2025-11-01 19:26:40"}
{"level":"error","message":"searchUsers error: Error: userID không hợp lệ\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:230:15)\n    at searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:114:39)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at module.exports (D:\\BaiTapLonWeb20251\\backend\\src\\middlewares\\auth.middleware.js:42:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'userID không hợp lệ'\n}","timestamp":"2025-11-01 19:28:36"}
{"level":"error","message":"searchUsers error: Error: userID không hợp lệ\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:235:15)\n    at searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:114:39)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at module.exports (D:\\BaiTapLonWeb20251\\backend\\src\\middlewares\\auth.middleware.js:42:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'userID không hợp lệ'\n}","timestamp":"2025-11-01 19:29:05"}
{"level":"error","message":"searchUsers error: Error: userID không hợp lệ\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:235:15)\n    at searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:114:39)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at module.exports (D:\\BaiTapLonWeb20251\\backend\\src\\middlewares\\auth.middleware.js:42:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'userID không hợp lệ'\n}","timestamp":"2025-11-01 19:29:48"}
{"level":"error","message":"searchUsers error: Error: userID không hợp lệ\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:229:15)\n    at searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:114:39)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at module.exports (D:\\BaiTapLonWeb20251\\backend\\src\\middlewares\\auth.middleware.js:42:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'userID không hợp lệ'\n}","timestamp":"2025-11-01 19:30:23"}
{"level":"error","message":"searchUsers error: Error: userID không hợp lệ\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:229:15)\n    at searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:114:39)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at module.exports (D:\\BaiTapLonWeb20251\\backend\\src\\middlewares\\auth.middleware.js:42:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'userID không hợp lệ'\n}","timestamp":"2025-11-01 19:30:34"}
{"level":"error","message":"searchUsers error: Error: userID không hợp lệ\n    at Object.searchUsers (D:\\BaiTapLonWeb20251\\backend\\src\\services\\friend.service.js:230:15)\n    at searchUser (D:\\BaiTapLonWeb20251\\backend\\src\\controllers\\friend.controller.js:114:39)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\BaiTapLonWeb20251\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at module.exports (D:\\BaiTapLonWeb20251\\backend\\src\\middlewares\\auth.middleware.js:42:5) {\n  [stack]: [Getter/Setter],\n  [message]: 'userID không hợp lệ'\n}","timestamp":"2025-11-01 19:31:09"}
